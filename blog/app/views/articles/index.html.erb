<h1>Articles</h1>

<% if user_signed_in? %>
  <p>Our blog has <%= Article.public_count %> public articles and counting!</p>
<% else %>
  <p>Our blog has <%= Article.where(status: 'public').count %> public articles and counting!</p>
<% end %>

<ul>
  <% @articles.each do |article| %>
    <% unless article.archived? %>
      <li>
        <%= link_to article.title, article %> by <%= article.user.email %>
        <% if user_signed_in? && article.user == current_user %>
          | <%= link_to "Edit", edit_article_path(article) %>
          | <%= link_to "Destroy", article_path(article), data: {
                        turbo_method: :delete,
                        turbo_confirm: "Are you sure?"
                      } %>
        <% end %>
      </li>
    <% end %>
  <% end %>
</ul>

<% if user_signed_in? %>
  <%= link_to "New Article", new_article_path %>
<% end %>
